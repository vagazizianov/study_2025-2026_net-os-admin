---
title: "Лабораторная работа №13"
author: "Газизянов Владислав Альбертович"
subtitle: "Настройка NFS"
license: "CC BY"
date: today
date-format: "YYYY-MM-DD"
---

# Цели и задачи

**Цель:** Приобретение навыков настройки сервера NFS для удалённого доступа к ресурсам

**Задачи:**
- Настройка сервера NFSv4
- Монтирование ресурсов на клиенте
- Подключение каталогов к дереву NFS
- Автоматизация развертывания

# Настройка сервера NFSv4

**Основные этапы:**
- Установка пакета nfs-utils
- Создание структуры каталогов
- Конфигурация файла exports
- Настройка безопасности SELinux

![Установка nfs-utils на сервере](image/1.png){width=70%}

# Конфигурация экспорта

**Настройка доступа:**
- Определение правил в /etc/exports
- Настройка прав доступа
- Экспорт корневого каталога
- Параметры безопасности

![Конфигурация файла /etc/exports](image/3.png){width=70%}

# Безопасность и firewall

**Обеспечение защиты:**
- Настройка политик SELinux
- Конфигурация межсетевого экрана
- Открытие служб nfs, mountd, rpc-bind
- Управление доступом

![Настройка firewall для NFS](image/6.png){width=70%}

# Запуск службы NFS

**Активация сервиса:**
- Запуск nfs-server
- Настройка автозапуска
- Проверка статуса службы
- Диагностика работы

![Запуск службы NFS](image/5.png){width=70%}

# Клиентская часть

**Настройка клиента:**
- Установка nfs-utils
- Проверка доступности ресурсов
- Создание точек монтирования
- Ручное монтирование

![Установка nfs-utils на клиенте](image/7.png){width=70%}

# Проверка доступности

**Диагностика подключения:**
- Команда showmount
- Тестирование при разных состояниях firewall
- Проверка сетевой доступности
- Анализ ошибок подключения

![Проверка доступности NFS-ресурсов](image/8.png){width=70%}

# Монтирование ресурсов

**Организация доступа:**
- Создание каталога /mnt/nfs
- Ручное монтирование ресурсов
- Проверка корректности монтирования
- Тестирование функциональности

![Монтирование NFS на клиенте](image/9.png){width=70%}

# Автоматическое монтирование

**Настройка автозапуска:**
- Редактирование /etc/fstab
- Использование опции _netdev
- Проверка remote-fs.target
- Тестирование после перезагрузки

![Настройка автоматического монтирования](image/10.png){width=70%}

# Интеграция веб-сервера

**Подключение контента:**
- Создание /srv/nfs/www
- Bind-монтирование /var/www/
- Экспорт каталога веб-сервера
- Настройка постоянного монтирования

![Bind-монтирование каталога веб-сервера](image/11.png){width=70%}

# Пользовательские каталоги

**Организация личного пространства:**
- Создание защищённых каталогов
- Настройка прав доступа
- Bind-монтирование в NFS
- Тестирование доступа

![Создание пользовательского каталога](image/13.png){width=70%}

# Тестирование доступа

**Проверка функциональности:**
- Создание тестовых файлов
- Проверка прав различных пользователей
- Тестирование записи и чтения
- Верификация синхронизации

![Тестирование доступа к пользовательскому каталогу](image/15.png){width=70%}

# Автоматизация развертывания

**Скрипты provisioning:**
- Разработка скриптов для сервера и клиента
- Интеграция с Vagrant
- Автоматическая настройка служб
- Проверка работы автоматизации

![Скрипт настройки сервера NFS](image/16.png){width=70%}

# Контрольные вопросы

**Ключевые аспекты:**
- Файл конфигурации: /etc/exports
- Брандмауэр: службы nfs, mountd, rpc-bind
- Автомонтирование: опция _netdev в fstab
- Безопасность: SELinux и права доступа

# Выводы

**Результаты работы:**
- Освоена настройка сервера NFSv4
- Приобретён опыт монтирования ресурсов
- Изучена интеграция каталогов в NFS
- Разработана система автоматизации
- Освоены методы обеспечения безопасности
