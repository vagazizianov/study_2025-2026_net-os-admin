---
title: "Лабораторная работа №9"
author: "Газизянов Владислав Альбертович"
subtitle: "Настройка POP3/IMAP сервера"
license: "CC BY"
date: today
date-format: "YYYY-MM-DD"
---

# Цели и задачи

**Цель:** Приобретение практических навыков по установке и конфигурированию POP3/IMAP-сервера

**Задачи:**
- Установка и настройка Dovecot
- Интеграция с Postfix
- Настройка почтового клиента Evolution
- Тестирование работы почтовой системы
- Автоматизация развертывания

# Архитектура почтовой системы

**Компоненты системы:**
- Dovecot - POP3/IMAP сервер
- Postfix - SMTP сервер  
- Evolution - почтовый клиент
- Telnet - инструмент тестирования

![Схема работы почтовой системы](image/1.png){width=70%}

# Установка компонентов

**Установленные пакеты:**
- Dovecot - почтовый сервер
- Telnet - для тестирования
- Evolution - почтовый клиент

**Ключевые действия:**
- Установка через менеджер пакетов
- Настройка зависимостей
- Проверка установки

![Установка пакетов Dovecot и Telnet](image/1.png){width=70%}

# Настройка Dovecot

**Основные конфигурации:**
- Активация протоколов IMAP/POP3
- Настройка аутентификации
- Интеграция с системой PAM
- Формат почтовых ящиков Maildir

**Файлы конфигурации:**
- /etc/dovecot/dovecot.conf
- /etc/dovecot/conf.d/10-auth.conf
- /etc/dovecot/conf.d/10-mail.conf

![Настройка протоколов Dovecot](image/2.png){width=70%}

# Настройка аутентификации

**Механизмы аутентификации:**
- Метод plain для совместимости
- Интеграция с PAM
- Драйверы passwd и pam
- Настройка безопасности

**Конфигурационные файлы:**
- 10-auth.conf - методы аутентификации
- auth-system.conf.ext - системная аутентификация
- 10-mail.conf - параметры почтовых ящиков

![Настройка аутентификации](image/3.png){width=70%}

# Интеграция с Postfix

**Настройки интеграции:**
- Согласование формата почтовых ящиков
- Настройка каталога доставки Maildir
- Синхронизация параметров аутентификации

**Выполненные команды:**
- Настройка home_mailbox
- Перезапуск служб
- Проверка совместной работы

![Настройка Postfix](image/6.png){width=70%}

# Настройка безопасности

**Конфигурация firewall:**
- Открытие портов POP3 (110)
- Открытие портов POP3S (995)
- Открытие портов IMAP (143)
- Открытие портов IMAPS (993)

**Безопасность:**
- Настройка SELinux
- Восстановление контекстов
- Проверка правил доступа

![Настройка межсетевого экрана](image/7.png){width=70%}

# Запуск и тестирование

**Запуск служб:**
- Активация Dovecot
- Перезапуск Postfix
- Настройка автозапуска

**Тестирование:**
- Проверка статуса служб
- Мониторинг логов
- Диагностика ошибок

![Запуск почтовых служб](image/8.png){width=70%}

# Настройка почтового клиента

**Evolution настройка:**
- Учетная запись пользователя
- Сервер входящей почты (IMAP)
- Сервер исходящей почты (SMTP)
- Параметры аутентификации

**Параметры подключения:**
- Адрес сервера: mail.user.net
- Порт IMAP: 143
- Порт SMTP: 25
- Метод аутентификации: STARTTLS

![Установка Evolution](image/12.png){width=70%}

# Тестирование работы

**Функциональное тестирование:**
- Отправка тестовых писем
- Проверка доставки
- Управление почтовыми ящиками
- Работа с вложениями

**Инструменты тестирования:**
- Графический клиент Evolution
- Консольная утилита mail
- Административные утилиты doveadm

![Настройка учетной записи](image/13.png){width=70%}

# Тестирование через Telnet

**Проверка POP3 протокола:**
- Подключение к серверу
- Аутентификация пользователя
- Просмотр списка сообщений
- Чтение и удаление писем

**Основные команды:**
- USER - аутентификация
- PASS - ввод пароля
- LIST - список сообщений
- RETR - чтение письма
- DELE - удаление письма

![Тестирование POP3 соединения](image/15.png){width=70%}

# Автоматизация развертывания

**Vagrant скрипты:**
- Автоматическая установка пакетов
- Настройка конфигурационных файлов
- Конфигурация firewall
- Запуск и настройка служб

**Преимущества автоматизации:**
- Воспроизводимость настроек
- Быстрое развертывание
- Минимизация ошибок
- Документирование процесса

![Создание скриптов автоматизации](image/16.png){width=70%}

# Контрольные вопросы

**Основные вопросы:**
- SMTP: отправка почты между серверами
- IMAP: управление почтой на сервере
- POP3: загрузка почты на клиент
- Dovecot: POP3/IMAP сервер доступа
- Postfix: SMTP сервер пересылки

**Технические детали:**
- Форматы почтовых ящиков: mbox vs Maildir
- Методы аутентификации: PLAIN, LOGIN
- Порты: 110(POP3), 143(IMAP), 993(IMAPS)

# Выводы

**Результаты работы:**
- Успешно настроен полнофункциональный почтовый сервер
- Отработаны навыки работы с Dovecot и Postfix
- Реализована интеграция различных компонентов
- Настроен безопасный доступ к почтовым ящикам
- Автоматизирован процесс развертывания системы

**Приобретенные компетенции:**
- Администрирование почтовых серверов
- Настройка сетевых служб
- Интеграция системных компонентов
- Автоматизация развертывания
- Диагностика и тестирование
