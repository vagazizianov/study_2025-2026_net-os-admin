---
title: "Лабораторная работа №5"
author: "Газизянов Владислав Альбертович"
subtitle: "Простые сети в GNS3. Анализ трафика"
license: "CC BY"
---

# Цель работы

Приобретение практических навыков по построению простейших моделей сети на базе коммутатора и маршрутизаторов **FRR** и **VyOS** в **GNS3**, а также анализ сетевого трафика с помощью **Wireshark**.

# Задание

1. Построить простейшую сеть на базе коммутатора Ethernet с двумя оконечными устройствами
2. Провести анализ сетевого трафика с помощью Wireshark (ARP и ICMP сообщения)
3. Построить сеть с маршрутизатором FRR и провести её настройку
4. Построить сеть с маршрутизатором VyOS и провести его настройку
5. Выполнить проверку связи между сетевыми устройствами

# Выполнение лабораторной работы

## Построение простейшей сети на базе коммутатора

### Создание топологии сети

В рабочей области **GNS3** размещены коммутатор Ethernet и два виртуальных PC (VPCS). Создана топология сети, где оба компьютера подключены к одному коммутатору. Устройствам присвоены уникальные имена согласно требованиям лабораторной работы.

![Топология простейшей сети в GNS3](image/1.png)

### Настройка IP-адресации

Для VPCS выполнена настройка IP-адресов в сети 192.168.1.0/24. PC-1 присвоен адрес 192.168.1.11/24, PC-2 - 192.168.1.12/24. В качестве шлюза по умолчанию указан адрес 192.168.1.1. Конфигурация сохранена с помощью команды `save`.

![Настройка IP-адресов VPCS](image/2.png)

### Проверка связи между узлами

Выполнена проверка работоспособности сети с помощью команды `ping`. Убедились в успешной связи между PC-1 и PC-2, что подтверждает корректность настройки сетевых параметров.

![Проверка связи между PC-1 и PC-2](image/3.png)

## Анализ трафика с помощью Wireshark

### Захват и анализ ARP-сообщений

Запущен захват сетевого трафика на соединении между PC-1 и коммутатором. В процессе работы сети зафиксированы **ARP-сообщения**, включая Gratuitous ARP запросы, которые устройства отправляют для проверки уникальности своих IP-адресов в сети.

![Анализ ARP-сообщений в Wireshark](image/4.png)

### Анализ ICMP-сообщений

Выполнены эхо-запросы с использованием различных режимов команды `ping`:
- **ICMP-режим** - стандартные эхо-запросы протокола ICMP
- **UDP-режим** - эхо-запросы с использованием протокола UDP
- **TCP-режим** - эхо-запросы с использованием протокола TCP

Проанализированы различия в структуре пакетов для каждого из протоколов.

![Анализ ICMP-сообщений в Wireshark](image/5.png)

## Моделирование сети с маршрутизатором FRR

### Построение топологии сети

Создана сетевая топология, включающая маршрутизатор **FRR**, коммутатор Ethernet и оконечное устройство VPCS. Все устройства соединены согласно схеме лабораторной работы.

![Топология сети с маршрутизатором FRR](image/6.png)

### Настройка маршрутизатора FRR

Выполнена базовая настройка маршрутизатора **FRR**:
- Изменено имя устройства на msk-user-gw-01
- Настроен IP-адрес 192.168.1.1/24 на интерфейсе eth0
- Активирован интерфейс командой `no shutdown`
- Конфигурация сохранена в память устройства

![Настройка маршрутизатора FRR](image/7.png)

### Проверка конфигурации и связи

Проверена текущая конфигурация маршрутизатора и состояние интерфейсов. Выполнена проверка связи между PC-1 и маршрутизатором, которая подтвердила корректность настройки сетевых параметров.

![Проверка конфигурации FRR](image/8.png)

## Моделирование сети с маршрутизатором VyOS

### Построение топологии и начальная настройка

Создана сетевая топология с маршрутизатором **VyOS**. Выполнена первоначальная установка системы на диск с последующей перезагрузкой устройства.

![Топология сети с маршрутизатором VyOS](image/9.png)

### Настройка маршрутизатора VyOS

Выполнена конфигурация маршрутизатора **VyOS** в режиме настройки:
- Установлено имя устройства msk-user-gw-01
- Назначен IP-адрес 192.168.1.1/24 на интерфейс eth0
- Изменения применены командой `commit`
- Конфигурация сохранена командой `save`

![Настройка маршрутизатора VyOS](image/10.png)

### Проверка работы сети

Проведена проверка связи между оконечным устройством и маршрутизатором. Успешные эхо-запросы подтвердили корректность настройки сетевых интерфейсов и маршрутизации.

![Проверка связи в сети с VyOS](image/11.png)

### Анализ трафика Wireshark

В процессе настройки и проверки связи выполнен захват сетевого трафика между коммутатором и маршрутизатором. Проанализированы сетевые пакеты, включая ARP-запросы и ICMP-сообщения.

![Анализ трафика в сети с VyOS](image/12.png)

# Контрольные вопросы

1. **Какие основные режимы VTY существуют в FRR?**  
   В FRR существуют три основных режима VTY: режим просмотра (только чтение), режим включения (чтение и запись) и другие специализированные режимы.

2. **Какой файл конфигурации используется в VyOS?**  
   VyOS использует единый файл конфигурации `/config/config.boot`, содержащий все настройки системы.

3. **Какие типы конфигураций существуют в VyOS?**  
   В VyOS существуют: активная конфигурация (текущая работающая), рабочая конфигурация (изменяемая) и сохранённая конфигурация (в файле).

4. **Какие команды используются для применения изменений в VyOS?**  
   Для применения изменений используется команда `commit`, для сохранения - `save`.

5. **Какие протоколы были проанализированы с помощью Wireshark?**  
   В ходе работы проанализированы протоколы ARP, ICMP, UDP и TCP.

# Выводы

- Освоены практические навыки работы с сетевым симулятором **GNS3**
- Приобретён опыт построения простейших сетевых топологий с использованием коммутаторов и маршрутизаторов
- Изучены особенности настройки маршрутизаторов **FRR** и **VyOS**
- Получены навыки анализа сетевого трафика с помощью **Wireshark**
- Освоены методы диагностики сетевых соединений с использованием утилиты `ping`
- Приобретён опыт работы с сетевыми протоколами канального и сетевого уровня
- Отработаны навыки конфигурирования сетевых интерфейсов и проверки их работоспособности
